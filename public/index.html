<!--<!doctype html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport"-->
<!--          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">-->
<!--    <meta http-equiv="X-UA-Compatible" content="ie=edge">-->
<!--    <title>Raspberry Basics</title>-->
<!--</head>-->
<!--<body>-->
<!--    <h1>Welcome to Raspberry Basics</h1>-->

<!--    <br>-->

<!--    <a href="/status.html">-->
<!--        <button>Status</button>-->
<!--    </a>-->

<!--    <a href="/webcam-image.html">-->
<!--        <button>Webcam Foto</button>-->
<!--    </a>-->

<!--    <a href="/livecamsite.html">-->
<!--        <button>livecam</button>-->
<!--    </a>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webcam Stream</title>
</head>
<body>
<h1>Webcam Stream</h1>
<canvas id="canvas"></canvas>
<div id="log"></div>
<script src="jsmpeg.min.js"></script>
<script>
    const log = (msg) => {
        const logElement = document.getElementById('log');
        logElement.innerHTML += msg + '<br>';
    };

    const player = new JSMpeg.Player('ws://' + window.location.hostname + ':9999', {
        canvas: document.getElementById('canvas'),
        onPlay: () => log('Playing'),
        onPause: () => log('Paused'),
        onEnded: () => log('Ended'),
        onStalled: () => log('Stalled')
    });

    const ws = new WebSocket('ws://' + window.location.hostname + ':9999');
    ws.binaryType = 'arraybuffer';

    ws.onopen = () => log('WebSocket connection opened');
    ws.onmessage = (event) => log(`WebSocket message received: ${event.data.byteLength} bytes`);
    ws.onclose = () => log('WebSocket connection closed');
    ws.onerror = (error) => log(`WebSocket error: ${error.message}`);
</script>
</body>
</html>

